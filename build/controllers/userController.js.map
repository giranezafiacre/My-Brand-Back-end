{"version":3,"sources":["../../src/controllers/userController.js"],"names":["readAll","req","res","users","status","json","error","message","data","readById","id","params","user","filter","create","email","body","password","role","userf","userFind","push","token","login","console","log","update","deleteUser","a","indexOf","splice"],"mappings":";;;;;;;;;AACA;;AACA;;AACA;;AAGO,IAAMA,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD,EAAMC,GAAN,EAAc;AACjC,MAAI,CAACC,iBAAL,EAAY;AACR,WAAOD,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBD,MAAAA,MAAM,EAAE,GADgB;AAExBE,MAAAA,KAAK,EAAE;AAFiB,KAArB,CAAP;AAIH;;AACD,SAAOJ,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBD,IAAAA,MAAM,EAAE,GADgB;AAExBG,IAAAA,OAAO,EAAE,8BAFe;AAGxBC,IAAAA,IAAI,EAAE;AACFL,MAAAA,KAAK,EAALA;AADE;AAHkB,GAArB,CAAP;AAOH,CAdM;;;;AAeA,IAAMM,QAAQ,GAAG,SAAXA,QAAW,CAACR,GAAD,EAAMC,GAAN,EAAc;AAClC,MAAMQ,EAAE,GAAGT,GAAG,CAACU,MAAJ,CAAWD,EAAtB;;AACA,MAAME,IAAI,GAAGT,kBAAMU,MAAN,CAAa,UAACD,IAAD,EAAU;AAChC,WAAOA,IAAI,CAACF,EAAL,KAAYA,EAAnB;AACH,GAFY,CAAb;;AAGA,MAAIE,IAAI,CAAC,CAAD,CAAR,EAAa;AACT,WAAOV,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBD,MAAAA,MAAM,EAAE,GADgB;AAExBG,MAAAA,OAAO,EAAE,6BAFe;AAGxBC,MAAAA,IAAI,EAAEI;AAHkB,KAArB,CAAP;AAKH;;AACD,SAAOV,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBD,IAAAA,MAAM,EAAE,GADgB;AAExBE,IAAAA,KAAK,EAAE;AAFiB,GAArB,CAAP;AAKH,CAjBM;;;;AAkBA,IAAMQ,MAAM,GAAG,SAATA,MAAS,CAACb,GAAD,EAAMC,GAAN,EAAc;AAChC,MAAMU,IAAI,GAAG;AACTF,IAAAA,EAAE,EAAE,eADK;AAETK,IAAAA,KAAK,EAAEd,GAAG,CAACe,IAAJ,CAASD,KAFP;AAGTE,IAAAA,QAAQ,EAAEhB,GAAG,CAACe,IAAJ,CAASC,QAHV;AAITC,IAAAA,IAAI,EAAE;AAJG,GAAb;;AAMA,MAAMC,KAAK,GAAGhB,kBAAMU,MAAN,CAAa,UAACD,IAAD,EAAU;AACjC,WAAOA,IAAI,CAACG,KAAL,KAAeK,QAAQ,CAACL,KAA/B;AACH,GAFa,CAAd;;AAGA,MAAII,KAAK,CAAC,CAAD,CAAT,EAAc;AACd,WAAOjB,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBD,MAAAA,MAAM,EAAE,GADgB;AAExBE,MAAAA,KAAK,sBAAeM,IAAI,CAACG,KAApB;AAFmB,KAArB,CAAP;AAIC,GALD,MAKK;AACDZ,sBAAMkB,IAAN,CAAWT,IAAX;;AACA,WAAOV,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBD,MAAAA,MAAM,EAAE,GADgB;AAExBG,MAAAA,OAAO,EAAE,2BAFe;AAGxBC,MAAAA,IAAI,EAAEI,IAHkB;AAIxBU,MAAAA,KAAK,EAALA;AAJwB,KAArB,CAAP;AAMH;AAEJ,CAzBM;;;;AA0BA,IAAMC,KAAK,GAAC,SAANA,KAAM,CAACtB,GAAD,EAAKC,GAAL,EAAW;AAC1B,MAAMkB,QAAQ,GAAC;AACXL,IAAAA,KAAK,EAACd,GAAG,CAACe,IAAJ,CAASD,KADJ;AAEXE,IAAAA,QAAQ,EAAChB,GAAG,CAACe,IAAJ,CAASC;AAFP,GAAf;;AAKA,MAAML,IAAI,GAAGT,kBAAMU,MAAN,CAAa,UAACD,IAAD,EAAU;AAChC,WAAOA,IAAI,CAACG,KAAL,KAAeK,QAAQ,CAACL,KAAxB,IAAiCH,IAAI,CAACK,QAAL,KAAkBG,QAAQ,CAACH,QAA5D,IAAuEL,IAAI,CAACM,IAAnF;AACH,GAFY,CAAb;;AAGA,MAAIN,IAAI,CAAC,CAAD,CAAR,EAAa;AACTY,IAAAA,OAAO,CAACC,GAAR,CAAYb,IAAI,CAAC,CAAD,CAAJ,CAAQG,KAApB,EAA0BH,IAAI,CAAC,CAAD,CAAJ,CAAQM,IAAlC;;AACA,QAAMI,MAAK,GAAG,+BAAcV,IAAI,CAAC,CAAD,CAAJ,CAAQG,KAAtB,EAA4BH,IAAI,CAAC,CAAD,CAAJ,CAAQM,IAApC,CAAd;;AACA,WAAOhB,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBD,MAAAA,MAAM,EAAE,GADgB;AAExBG,MAAAA,OAAO,EAAE,wBAFe;AAGxBC,MAAAA,IAAI,EAAEI,IAHkB;AAIxBU,MAAAA,KAAK,EAALA;AAJwB,KAArB,CAAP;AAMH;;AACD,SAAOpB,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBD,IAAAA,MAAM,EAAE,GADgB;AAExBE,IAAAA,KAAK,EAAE;AAFiB,GAArB,CAAP;AAIH,CAvBM;;;;AAyBA,IAAMoB,MAAM,GAAC,SAAPA,MAAO,CAACzB,GAAD,EAAKC,GAAL,EAAW;AAC3B,MAAMQ,EAAE,GAAGT,GAAG,CAACU,MAAJ,CAAWD,EAAtB;;AACA,MAAME,IAAI,GAAGT,kBAAMU,MAAN,CAAa,UAACD,IAAD,EAAU;AAChC,WAAOA,IAAI,CAACF,EAAL,KAAYA,EAAnB;AACH,GAFY,CAAb;;AAGA,MAAGE,IAAI,CAAC,CAAD,CAAP,EAAW;AACPA,IAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQG,KAAR,GAAcd,GAAG,CAACe,IAAJ,CAASD,KAAvB;AACAH,IAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQK,QAAR,GAAkBhB,GAAG,CAACe,IAAJ,CAASC,QAA3B;AACA,WAAOf,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBD,MAAAA,MAAM,EAAE,GADgB;AAExBG,MAAAA,OAAO,EAAE,2BAFe;AAGxBC,MAAAA,IAAI,EAAEI;AAHkB,KAArB,CAAP;AAKH;;AACD,SAAOV,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBD,IAAAA,MAAM,EAAE,GADgB;AAExBE,IAAAA,KAAK,EAAE;AAFiB,GAArB,CAAP;AAKH,CAnBM;;;;AAqBA,IAAMqB,UAAU,GAAC,SAAXA,UAAW,CAAC1B,GAAD,EAAKC,GAAL,EAAW;AAC/B,MAAMQ,EAAE,GAACT,GAAG,CAACU,MAAJ,CAAWD,EAApB;;AACA,MAAME,IAAI,GAAGT,kBAAMU,MAAN,CAAa,UAACD,IAAD,EAAU;AAChC,WAAOA,IAAI,CAACF,EAAL,KAAYA,EAAnB;AACH,GAFY,CAAb;;AAGA,MAAGE,IAAI,CAAC,CAAD,CAAP,EAAW;AACP,QAAIgB,CAAC,GAAGzB,kBAAM0B,OAAN,CAAcjB,IAAI,CAAC,CAAD,CAAlB,CAAR;;AACAT,sBAAM2B,MAAN,CAAaF,CAAb,EAAgB,CAAhB;;AACA,WAAO1B,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBD,MAAAA,MAAM,EAAE,GADgB;AAExBG,MAAAA,OAAO,EAAE,2BAFe;AAGxBC,MAAAA,IAAI,EAAEI;AAHkB,KAArB,CAAP;AAKH;;AACD,SAAOV,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACxBD,IAAAA,MAAM,EAAE,GADgB;AAExBE,IAAAA,KAAK,EAAE;AAFiB,GAArB,CAAP;AAIH,CAlBM","sourcesContent":["\r\nimport users from '../models/users';\r\nimport generateToken from '../helpers/generateToken'\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n\r\nexport const readAll = (req, res) => {\r\n    if (!users) {\r\n        return res.status(404).json({\r\n            status: 404,\r\n            error: 'No office found',\r\n        });\r\n    }\r\n    return res.status(200).json({\r\n        status: 200,\r\n        message: 'users successfully retrieved',\r\n        data: {\r\n            users,\r\n        },\r\n    });\r\n};\r\nexport const readById = (req, res) => {\r\n    const id = req.params.id;\r\n    const user = users.filter((user) => {\r\n        return user.id === id;\r\n    });\r\n    if (user[0]) {\r\n        return res.status(200).json({\r\n            status: 200,\r\n            message: 'user successfully retrieved',\r\n            data: user,\r\n        });\r\n    }\r\n    return res.status(404).json({\r\n        status: 404,\r\n        error: 'user not found',\r\n    });\r\n\r\n};\r\nexport const create = (req, res) => {\r\n    const user = {\r\n        id: uuidv4(),\r\n        email: req.body.email,\r\n        password: req.body.password,\r\n        role: 'user'\r\n    };\r\n    const userf = users.filter((user) => {\r\n        return user.email === userFind.email ;\r\n    });\r\n    if (userf[0]) {\r\n    return res.status(409).json({\r\n        status: 409,\r\n        error: `user with ${user.email} already exists`,\r\n    });\r\n    }else{\r\n        users.push(user);\r\n        return res.status(201).json({\r\n            status: 201,\r\n            message: 'user successfully created',\r\n            data: user,\r\n            token,\r\n        });\r\n    }\r\n\r\n};\r\nexport const login=(req,res)=>{\r\n    const userFind={\r\n        email:req.body.email,\r\n        password:req.body.password\r\n    };\r\n    \r\n    const user = users.filter((user) => {\r\n        return user.email === userFind.email && user.password === userFind.password &&user.role;\r\n    });\r\n    if (user[0]) {\r\n        console.log(user[0].email,user[0].role);\r\n        const token = generateToken(user[0].email,user[0].role);\r\n        return res.status(200).json({\r\n            status: 200,\r\n            message: 'successfully logged in',\r\n            data: user,\r\n            token\r\n        });\r\n    }\r\n    return res.status(404).json({\r\n        status: 404,\r\n        error: 'signup first',\r\n    });\r\n}\r\n\r\nexport const update=(req,res)=>{\r\n    const id = req.params.id;\r\n    const user = users.filter((user) => {\r\n        return user.id === id;\r\n    });\r\n    if(user[0]){\r\n        user[0].email=req.body.email;\r\n        user[0].password= req.body.password;\r\n        return res.status(200).json({\r\n            status: 200,\r\n            message: 'user successfully updated',\r\n            data: user,\r\n        });\r\n    }\r\n    return res.status(404).json({\r\n        status: 404,\r\n        error: 'user not found',\r\n    });\r\n    \r\n}\r\n\r\nexport const deleteUser=(req,res)=>{\r\n    const id=req.params.id;\r\n    const user = users.filter((user) => {\r\n        return user.id === id;\r\n    });\r\n    if(user[0]){\r\n        var a = users.indexOf(user[0]);\r\n        users.splice(a, 1);\r\n        return res.status(200).json({\r\n            status: 200,\r\n            message: 'user successfully deleted',\r\n            data: user,\r\n        });\r\n    }\r\n    return res.status(404).json({\r\n        status: 404,\r\n        error: 'user not found',\r\n    });\r\n}"],"file":"userController.js"}